# A simple log system

## 功能

1. 存储日志信息至文本文件`.log`中. 

2. 日志内容: 时间、消息级别、文件名、行号、日志信息

3. 日志翻滚: 设置日志最大内存限制，若超出开辟新文件存储日志内容.

## 实现细节

### 单例对象

将类私有化，向外提供一个返回静态对象的接口，只在第一次(还没有对象时)
创建一次.

### 格式化字符串

#### `snprintf`

`int snprintf(char *str, size_t size, const char *format, ...);

参数说明:

* `str`: 字符数组，格式化后的输出写入该数组
* `size`: 缓冲区str的最大大小(包括`\0`)
* `format`: 格式化字符串，与`printf`系列函数的格式化字符串相同
* `...`: 可变参数，与`printf`类似，用于提供格式化串中占位符的实际值.

返回值:

* 返回格式化后字符串长度，(不包括`\0`). 如果返回值大于或等于`size`，表示输出被
截断.

相比与`sprintf`，`snprintf`通过显式的`size`参数防止缓冲区溢出，更安全.

额外作用： 计算格式化字符串的总长度:

如果第一个参数`str`为`NULL`, 第二个参数`size`为0，此时`snprintf`
不输出任何数据，只用于提前计算字符串所需的内存空间大小.

### 文件处理

通过`C++`中的`ofstream`对日志文件写入信息.

#### `rename`

`int rename(const char *old_filename, const char *new_filename);`

用于重命名文件或移动文件，成功是返回0.

当日志文件大小大于限定的最大值(实际实现时判断可能会额外超出一部分)
时，通过`rename()`函数将当前`xx.log`重命名，再重新创建`xx.log`进行
后续的日志信息存储.

